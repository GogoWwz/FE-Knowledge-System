## HTTP

### HTTP 1.0

存在如下问题：

- 无法持久化连接

  每次建立HTTP请求都会走一遍完整的TCP握手流程

- 队头阻塞

  每个http请求是串行的，上一个请求如果是pending状态，将会一直阻塞下一个请求

- 单向请求

  只能由客户端端发起，服务端只是个被动接受的角色

### HTTP 1.1

解决了持久化连接的问题，通过`keep-alive`，第一次请求建立TCP连接之后，后续http请求不需要再建立连接

但还是存在队头阻塞和单向请求问题

虽然通过管道化可以实现http请求的批量发送，但是服务端响应还是只能一条条响应，队头阻塞的问题并没有得到解决

### HTTP2.0

进行了很多优化：

- 多路复用

  在实现批量发送的同时，各个请求之间互不干扰，不存在阻塞，请求与请求之间独立，实现了并行的请求

- 服务端推送

  1.x中如果请求存在依赖其他资源，那么不得不再消耗一个http请求

  2.0中实现了服务端推送，当发生上述情况时，服务端会主动向客户端推送资源，减少了http请求消耗

  解决了单向请求的问题

- 头部压缩

  2.0之前的请求header都是以文本的形式传输，如果携带cookie的话，每个请求的体积会很大

  2.0中对header进行了 HPACK 压缩，并且客户端和服务端会同时维护一份动态字典，里面会记录通信过程中使用过的header

  后续传输过程中只需要传递新的header即可，已有信息可以直接复用

- 二进制分帧

  个人理解2.0以前，数据都是以文本传输的，解析起来比较低效，2.0传输会消息分割成帧消息之后，以二进制的格式传输

